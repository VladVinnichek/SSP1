<Window x:Class="_6LAB.Task2Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Задание 2: Текстовый редактор с триггерами" 
        Height="650" Width="900"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Градиентный фон для текстовых полей -->
        <LinearGradientBrush x:Key="TextAreaGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#E8F5E8" Offset="0"/>
            <GradientStop Color="#C8E6C9" Offset="0.5"/>
            <GradientStop Color="#A5D6A7" Offset="1"/>
        </LinearGradientBrush>

        <!-- Стиль для кнопки Открыть с простыми триггерами -->
        <Style x:Key="OpenButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2196F3"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#1976D2"/>
            <Setter Property="Cursor" Value="Hand"/>

            <Style.Triggers>
                <!-- Простой триггер для наведения -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1976D2"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect ShadowDepth="3" BlurRadius="10" Opacity="0.3"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>

                <!-- Простой триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#0D47A1"/>
                    <Setter Property="Foreground" Value="#FFEB3B"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для кнопки Очистить с MultiTrigger -->
        <Style x:Key="ClearButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF9800"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#F57C00"/>
            <Setter Property="Cursor" Value="Hand"/>

            <Style.Triggers>
                <!-- MultiTrigger - срабатывает только при выполнении всех условий -->
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsMouseOver" Value="True"/>
                        <Condition Property="IsEnabled" Value="True"/>
                    </MultiTrigger.Conditions>
                    <MultiTrigger.Setters>
                        <Setter Property="Background" Value="#F57C00"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Foreground" Value="#FFFDE7"/>
                        <Setter Property="RenderTransform">
                            <Setter.Value>
                                <TranslateTransform X="0" Y="-2"/>
                            </Setter.Value>
                        </Setter>
                    </MultiTrigger.Setters>
                </MultiTrigger>

                <!-- Триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#EF6C00"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.92" ScaleY="0.92"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для кнопки Закрыть с DataTrigger и MultiDataTrigger -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#F44336"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#D32F2F"/>
            <Setter Property="Cursor" Value="Hand"/>

            <Style.Triggers>
                <!-- DataTrigger - зависит от свойства IsEnabled -->
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled}" Value="False">
                    <Setter Property="Background" Value="#BDBDBD"/>
                    <Setter Property="Foreground" Value="#757575"/>
                    <Setter Property="BorderBrush" Value="#9E9E9E"/>
                    <Setter Property="Cursor" Value="No"/>
                </DataTrigger>

                <!-- MultiDataTrigger - срабатывает при выполнении всех условий -->
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled}" Value="True"/>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <MultiDataTrigger.Setters>
                        <Setter Property="Background" Value="#D32F2F"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect ShadowDepth="4" BlurRadius="15" Color="Red" Opacity="0.3"/>
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger.Setters>
                </MultiDataTrigger>

                <!-- Триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#B71C1C"/>
                    <Setter Property="Foreground" Value="#FFCDD2"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.9" ScaleY="0.9"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- EventTrigger для анимации текстовых полей -->
        <Style x:Key="AnimatedTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource TextAreaGradient}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#81C784"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontFamily" Value="Arial"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#212121"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>

            <Style.Triggers>
                <!-- Триггер при получении фокуса -->
                <Trigger Property="IsFocused" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#E1F5FE" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#B3E5FC" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#81D4FA" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[2].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ThicknessAnimation To="2" 
                                                  Storyboard.TargetProperty="BorderThickness" 
                                                  Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#E8F5E8" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#C8E6C9" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#A5D6A7" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[2].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ThicknessAnimation To="1" 
                                                  Storyboard.TargetProperty="BorderThickness" 
                                                  Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid Background="#FAFAFA">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="#4CAF50" Padding="15">
            <TextBlock Text="Текстовый редактор с различными типами триггеров" 
                      FontSize="22" FontWeight="Bold" 
                      HorizontalAlignment="Center" Foreground="White"
                      TextAlignment="Center"/>
        </Border>

        <!-- Панель управления -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" 
                   HorizontalAlignment="Center" Margin="20,15">
            <Button x:Name="OpenButton" Content="📂 Открыть" 
                   Style="{StaticResource OpenButtonStyle}"
                   Width="120" Click="OpenButton_Click"
                   ToolTip="Загрузить пример текста"/>

            <Button x:Name="ClearButton" Content="🗑️ Очистить" 
                   Style="{StaticResource ClearButtonStyle}"
                   Width="120" Click="ClearButton_Click"
                   ToolTip="Очистить оба текстовых поля"/>

            <Button x:Name="CloseButton" Content="⬅️ Закрыть" 
                   Style="{StaticResource CloseButtonStyle}"
                   Width="120" Click="CloseButton_Click"
                   ToolTip="Вернуться в главное меню (доступно только когда оба поля пусты)"/>
        </StackPanel>

        <!-- Текстовые поля -->
        <Grid Grid.Row="2" Margin="20,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,5,0">
                <TextBlock Text="Текстовое поле 1:" 
                          FontWeight="SemiBold" Margin="0,0,0,5"
                          Foreground="#37474F"/>
                <TextBox x:Name="TextBox1" 
                        Style="{StaticResource AnimatedTextBoxStyle}"
                        TextChanged="TextBox_TextChanged"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="5,0,0,0">
                <TextBlock Text="Текстовое поле 2:" 
                          FontWeight="SemiBold" Margin="0,0,0,5"
                          Foreground="#37474F"/>
                <TextBox x:Name="TextBox2" 
                        Style="{StaticResource AnimatedTextBoxStyle}"
                        TextChanged="TextBox_TextChanged"/>
            </StackPanel>
        </Grid>

        <!-- Настройки стиля текста -->
        <Border Grid.Row="3" Background="#E3F2FD" Margin="20,15" Padding="15" CornerRadius="8">
            <StackPanel>
                <TextBlock Text="Настройки внешнего вида текста:" 
                          FontSize="16" FontWeight="Bold" 
                          Margin="0,0,0,10" Foreground="#1565C0"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Стиль шрифта:" 
                              VerticalAlignment="Center" Margin="0,0,10,0"
                              FontWeight="SemiBold"/>

                    <ComboBox x:Name="FontStyleComboBox" Width="200" 
                             SelectionChanged="FontStyleComboBox_SelectionChanged">
                        <ComboBoxItem Content="Обычный (Arial, 12pt)" Tag="Normal"/>
                        <ComboBoxItem Content="Заголовок (Times New Roman, 16pt)" Tag="Header"/>
                        <ComboBoxItem Content="Код (Consolas, 11pt)" Tag="Code"/>
                        <ComboBoxItem Content="Выделенный (Verdana, 14pt)" Tag="Highlight"/>
                    </ComboBox>

                    <TextBlock Text="Цвет текста:" 
                              VerticalAlignment="Center" Margin="20,0,10,0"
                              FontWeight="SemiBold"/>

                    <ComboBox x:Name="ColorComboBox" Width="150"
                             SelectionChanged="ColorComboBox_SelectionChanged">
                        <ComboBoxItem Content="Черный" Tag="Black"/>
                        <ComboBoxItem Content="Синий" Tag="Blue"/>
                        <ComboBoxItem Content="Красный" Tag="Red"/>
                        <ComboBoxItem Content="Зеленый" Tag="Green"/>
                        <ComboBoxItem Content="Фиолетовый" Tag="Purple"/>
                    </ComboBox>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Панель статуса и навигации -->
        <Border Grid.Row="4" Background="#37474F" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Статус -->
                <TextBlock x:Name="StatusText" Grid.Column="0"
                          Text="Готов к работе" 
                          VerticalAlignment="Center" Foreground="White"
                          FontStyle="Italic"/>

                <!-- Кнопка выхода -->
                <Button Grid.Column="1" Content="🚪 Выход" Click="ExitApp" 
                       Width="100" Margin="5"
                       Background="#F44336" Foreground="White"
                       FontWeight="SemiBold"
                       Cursor="Hand"/>
            </Grid>
        </Border>
    </Grid>
</Window>